# Epic 3: ì‹œê¸°ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë° ì•Œë¦¼

> ì‚¬ìš©ìê°€ ì¤‘ìš” ì¼ì •ì„ ë†“ì¹˜ì§€ ì•Šë„ë¡ ì„ ì œì ìœ¼ë¡œ ì•ˆë‚´í•˜ëŠ” íƒ€ì„ë¼ì¸ ë° ì•Œë¦¼ ì‹œìŠ¤í…œ

**Epic ID**: EPIC-003
**ìƒíƒœ**: Planned
**ìš°ì„ ìˆœìœ„**: P0 (ìµœìš°ì„ )
**ì˜ˆìƒ ê¸°ê°„**: 2ì£¼ (Sprint 5)
**ì˜ì¡´ì„±**: Epic 1 (ì‚¬ìš©ì í”„ë¡œí•„) ì™„ë£Œ í•„ìš”

---

## ğŸ“‹ ê°œìš”

### ëª©ì 
ì‚¬ìš©ì í”„ë¡œí•„(ì„ì‹  ì£¼ì°¨, ìë…€ ê°œì›”)ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹œê¸°ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ìë™ ìƒì„±í•˜ê³ , ì¤‘ìš” ì¼ì •ì„ í‘¸ì‹œ ì•Œë¦¼ìœ¼ë¡œ ì„ ì œì  ì•ˆë‚´

### í•µì‹¬ ê°€ì¹˜
- **ë†“ì¹˜ì§€ ì•ŠëŠ” ìœ¡ì•„**: íƒœì•„ë³´í—˜, ì˜ˆë°©ì ‘ì¢…, ì¶œìƒì‹ ê³  ë“± ì¤‘ìš” ì¼ì •ì„ ì•±ì´ ë¨¼ì € ì•Œë¦¼
- **ê°œì¸í™”ëœ íƒ€ì„ë¼ì¸**: ê° ì‚¬ìš©ìì˜ ì„ì‹  ì£¼ì°¨/ì•„ì´ ê°œì›”ì— ë§ì¶˜ ë§ì¶¤ ì¼ì •
- **ìŠ¤íŠ¸ë ˆìŠ¤ ê°ì†Œ**: "í˜¹ì‹œ ë†“ì¹œ ê²Œ ìˆì„ê¹Œ?" ê±±ì • í•´ì†Œ

---

## ğŸ¯ ì‚¬ìš©ì ìŠ¤í† ë¦¬

### Story 1: íƒ€ì„ë¼ì¸ ìë™ ìƒì„± (ì„ì‹ ë¶€)
**As a** ì„ì‹ ë¶€
**I want to** ì¶œì‚°ì˜ˆì •ì¼ì„ ì…ë ¥í•˜ë©´ ì„ì‹  ì£¼ì°¨ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì–´
**So that** ê° ì£¼ì°¨ì— í•´ì•¼ í•  ì¼ì„ í•œëˆˆì— í™•ì¸í•  ìˆ˜ ìˆë‹¤

**Acceptance Criteria**:
- [ ] ì˜¨ë³´ë”© ì™„ë£Œ ì‹œ íƒ€ì„ë¼ì¸ ìë™ ìƒì„±
- [ ] ì„ì‹  ì£¼ì°¨ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸ í¬í•¨ (ì˜ˆ: 22ì£¼ íƒœì•„ë³´í—˜, 34ì£¼ ì¶œì‚°íœ´ê°€)
- [ ] í™ˆ í™”ë©´ì— "ì´ë²ˆ ì£¼ í•  ì¼", "ë‹¤ìŒ ì£¼ í•  ì¼" í‘œì‹œ
- [ ] ì™„ë£Œí•œ í•­ëª©ì€ ì²´í¬ í‘œì‹œ

**ì˜ˆì‹œ íƒ€ì„ë¼ì¸**:
```
[22ì£¼ì°¨]
âœ… íƒœì•„ë³´í—˜ ê°€ì… ìƒë‹´ ì˜ˆì•½
â¬œ 2ì°¨ ê¸°í˜•ì•„ ê²€ì‚¬ (ì¿¼ë“œ ê²€ì‚¬)

[24ì£¼ì°¨]
â¬œ ì„ì‹  ë‹¹ë‡¨ ê²€ì‚¬

[28ì£¼ì°¨]
â¬œ ì¶œì‚° ì¤€ë¹„ë¬¼ ë¦¬ìŠ¤íŠ¸ ì‘ì„±

[34ì£¼ì°¨]
â¬œ ì¶œì‚°íœ´ê°€ ì‹ ì²­ (45ì¼ ì „)
â¬œ ì‚°í›„ì¡°ë¦¬ì› ì˜ˆì•½ í™•ì¸
```

---

### Story 2: íƒ€ì„ë¼ì¸ ìë™ ìƒì„± (ì‹ ìƒì•„ ë¶€ëª¨)
**As a** ì‹ ìƒì•„ ë¶€ëª¨
**I want to** ìë…€ ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ë©´ ê°œì›”ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì–´
**So that** ì˜ˆë°©ì ‘ì¢…, ë°œë‹¬ í™•ì¸ ë“± ë†“ì¹˜ì§€ ì•Šê³  ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤

**Acceptance Criteria**:
- [ ] ìë…€ ì •ë³´ ì…ë ¥ ì‹œ íƒ€ì„ë¼ì¸ ìë™ ìƒì„±
- [ ] ê°œì›”ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸ í¬í•¨ (ì˜ˆ: 2ê°œì›” ì˜ˆë°©ì ‘ì¢…, 6ê°œì›” ì´ìœ ì‹)
- [ ] ì—¬ëŸ¬ ìë…€ì˜ íƒ€ì„ë¼ì¸ í†µí•© í‘œì‹œ

**ì˜ˆì‹œ íƒ€ì„ë¼ì¸**:
```
[ìƒí›„ 2ê°œì›”]
â¬œ DTaP, í´ë¦¬ì˜¤, Hib, íë ´êµ¬ê· , ë¡œíƒ€ë°”ì´ëŸ¬ìŠ¤ 1ì°¨ ì ‘ì¢…

[ìƒí›„ 4ê°œì›”]
â¬œ DTaP, í´ë¦¬ì˜¤, Hib, íë ´êµ¬ê· , ë¡œíƒ€ë°”ì´ëŸ¬ìŠ¤ 2ì°¨ ì ‘ì¢…
â¬œ ì´ìœ ì‹ ì¤€ë¹„ (6ê°œì›”ë¶€í„° ì‹œì‘)

[ìƒí›„ 6ê°œì›”]
â¬œ DTaP, í´ë¦¬ì˜¤, Hib, íë ´êµ¬ê·  3ì°¨ ì ‘ì¢…
â¬œ ì´ìœ ì‹ ì‹œì‘ (ì´ˆê¸°)

[ìƒí›„ 12ê°œì›”]
â¬œ ì²« ëŒ ì¤€ë¹„
â¬œ MMR, ìˆ˜ë‘, ì¼ë³¸ë‡Œì—¼ ì ‘ì¢…
```

---

### Story 3: í‘¸ì‹œ ì•Œë¦¼
**As a** ì‚¬ìš©ì
**I want to** ì¤‘ìš” ì¼ì • 1ì£¼ì¼ ì „, 3ì¼ ì „, ë‹¹ì¼ì— ì•Œë¦¼ì„ ë°›ì•„ì„œ
**So that** ì¼ì •ì„ ë†“ì¹˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤

**Acceptance Criteria**:
- [ ] ì¤‘ìš” ì¼ì • (ì˜ˆë°©ì ‘ì¢…, íƒœì•„ë³´í—˜ ë§ˆê° ë“±) 1ì£¼ì¼ ì „ ì•Œë¦¼
- [ ] 3ì¼ ì „ ì¬ì•Œë¦¼
- [ ] ë‹¹ì¼ ì•Œë¦¼
- [ ] ì•Œë¦¼ ì„¤ì •ì—ì„œ ON/OFF ê°€ëŠ¥
- [ ] ì•Œë¦¼ ì‹œê°„ëŒ€ ì„¤ì • ê°€ëŠ¥ (ì˜ˆ: ì˜¤ì „ 9ì‹œ)

**ì˜ˆì‹œ ì•Œë¦¼**:
```
ğŸ“Œ [1ì£¼ì¼ ì „]
"ìƒí›„ 2ê°œì›” ì˜ˆë°©ì ‘ì¢…ì´ ë‹¤ê°€ì˜µë‹ˆë‹¤. ì†Œì•„ê³¼ ì˜ˆì•½í•˜ì…¨ë‚˜ìš”?"

ğŸ“Œ [3ì¼ ì „]
"ìƒí›„ 2ê°œì›” ì˜ˆë°©ì ‘ì¢…ì´ 3ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤. (DTaP, í´ë¦¬ì˜¤ ë“±)"

ğŸ“Œ [ë‹¹ì¼]
"ì˜¤ëŠ˜ì€ ì˜ˆë°©ì ‘ì¢… ë‚ ì…ë‹ˆë‹¤! ìŠì§€ ë§ê³  ë³‘ì› ê°€ì„¸ìš”."
```

---

### Story 4: ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ ì²˜ë¦¬
**As a** ì‚¬ìš©ì
**I want to** ì™„ë£Œí•œ ì¼ì •ì„ ì²´í¬í•˜ì—¬
**So that** ë‚¨ì€ í•  ì¼ì„ ëª…í™•íˆ íŒŒì•…í•  ìˆ˜ ìˆë‹¤

**Acceptance Criteria**:
- [ ] íƒ€ì„ë¼ì¸ í•­ëª© í´ë¦­ ì‹œ ì™„ë£Œ/ë¯¸ì™„ë£Œ í† ê¸€
- [ ] ì™„ë£Œí•œ í•­ëª©ì€ íšŒìƒ‰ ì²˜ë¦¬ + ì²´í¬ ì•„ì´ì½˜
- [ ] ì™„ë£Œìœ¨ í‘œì‹œ (ì˜ˆ: "ì´ë²ˆ ì£¼ 3/5 ì™„ë£Œ")

---

## ğŸ› ï¸ ê¸°ìˆ  ìš”êµ¬ì‚¬í•­

### íƒ€ì„ë¼ì¸ ìƒì„± ë¡œì§

#### ì„ì‹  ì£¼ì°¨ë³„ íƒ€ì„ë¼ì¸ í…œí”Œë¦¿
```typescript
const pregnancyTimeline = [
  {
    week: 11,
    title: '1ì°¨ ê¸°í˜•ì•„ ê²€ì‚¬',
    description: 'ëª©ëœë¯¸ íˆ¬ëª…ëŒ€ ê²€ì‚¬ (11-13ì£¼)',
    category: 'health',
    priority: 'high',
    notification_days: [7, 3, 0] // 7ì¼ ì „, 3ì¼ ì „, ë‹¹ì¼
  },
  {
    week: 16,
    title: '2ì°¨ ê¸°í˜•ì•„ ê²€ì‚¬',
    description: 'ì¿¼ë“œ ê²€ì‚¬',
    category: 'health',
    priority: 'high',
    notification_days: [7, 3, 0]
  },
  {
    week: 20,
    title: 'ì •ë°€ ì´ˆìŒíŒŒ',
    description: 'ê¸°í˜• í™•ì¸',
    category: 'health',
    priority: 'high',
    notification_days: [7, 3, 0]
  },
  {
    week: 22,
    title: 'íƒœì•„ë³´í—˜ ê°€ì… ë§ˆê°',
    description: '22ì£¼ ì „ ê°€ì… ê¶Œì¥',
    category: 'insurance',
    priority: 'high',
    notification_days: [14, 7, 3, 0] // 2ì£¼ ì „ë¶€í„° ì•Œë¦¼
  },
  {
    week: 24,
    title: 'ì„ì‹  ë‹¹ë‡¨ ê²€ì‚¬',
    description: '24-28ì£¼ ì‚¬ì´ ê²€ì‚¬',
    category: 'health',
    priority: 'medium',
    notification_days: [7, 3, 0]
  },
  {
    week: 28,
    title: 'ì¶œì‚° ì¤€ë¹„ë¬¼ ë¦¬ìŠ¤íŠ¸ ì‘ì„±',
    description: 'ë³‘ì› ê°€ë°©, ì‹ ìƒì•„ ìš©í’ˆ ì¤€ë¹„',
    category: 'preparation',
    priority: 'medium',
    notification_days: [7]
  },
  {
    week: 32,
    title: 'ì‚°í›„ì¡°ë¦¬ì› ì˜ˆì•½',
    description: 'ë§Œì‹¤ ëŒ€ë¹„ ë¯¸ë¦¬ ì˜ˆì•½',
    category: 'preparation',
    priority: 'medium',
    notification_days: [7]
  },
  {
    week: 34,
    title: 'ì¶œì‚°íœ´ê°€ ì‹ ì²­',
    description: 'ì¶œì‚°ì˜ˆì •ì¼ 45ì¼ ì „',
    category: 'work',
    priority: 'high',
    notification_days: [14, 7, 3, 0]
  },
  {
    week: 36,
    title: 'ì¶œì‚° ê°€ë°© ì¤€ë¹„ ì™„ë£Œ',
    description: 'ì–¸ì œë“  ë³‘ì› ê°ˆ ìˆ˜ ìˆë„ë¡',
    category: 'preparation',
    priority: 'high',
    notification_days: [7]
  }
];
```

#### ìœ¡ì•„ ê°œì›”ë³„ íƒ€ì„ë¼ì¸ í…œí”Œë¦¿
```typescript
const babyTimeline = [
  {
    month: 1,
    title: 'BCG ì ‘ì¢…',
    description: 'ê²°í•µ ì˜ˆë°©ì ‘ì¢…',
    category: 'health',
    priority: 'high',
    notification_days: [7, 3, 0]
  },
  {
    month: 2,
    title: 'DTaP, í´ë¦¬ì˜¤, Hib, íë ´êµ¬ê· , ë¡œíƒ€ë°”ì´ëŸ¬ìŠ¤ 1ì°¨ ì ‘ì¢…',
    description: 'êµ­ê°€ì˜ˆë°©ì ‘ì¢…',
    category: 'health',
    priority: 'high',
    notification_days: [7, 3, 0]
  },
  {
    month: 4,
    title: 'DTaP, í´ë¦¬ì˜¤, Hib, íë ´êµ¬ê· , ë¡œíƒ€ë°”ì´ëŸ¬ìŠ¤ 2ì°¨ ì ‘ì¢…',
    description: 'êµ­ê°€ì˜ˆë°©ì ‘ì¢…',
    category: 'health',
    priority: 'high',
    notification_days: [7, 3, 0]
  },
  {
    month: 4,
    title: 'ì´ìœ ì‹ ì¤€ë¹„',
    description: '6ê°œì›”ë¶€í„° ì‹œì‘ ì˜ˆì •',
    category: 'feeding',
    priority: 'medium',
    notification_days: [7]
  },
  {
    month: 6,
    title: 'DTaP, í´ë¦¬ì˜¤, Hib, íë ´êµ¬ê·  3ì°¨ ì ‘ì¢…',
    description: 'êµ­ê°€ì˜ˆë°©ì ‘ì¢…',
    category: 'health',
    priority: 'high',
    notification_days: [7, 3, 0]
  },
  {
    month: 6,
    title: 'ì´ìœ ì‹ ì‹œì‘',
    description: 'ì´ˆê¸° ì´ìœ ì‹ (ë¯¸ìŒ)',
    category: 'feeding',
    priority: 'high',
    notification_days: [7]
  },
  {
    month: 12,
    title: 'ì²« ëŒ ì¤€ë¹„',
    description: 'ëŒì”ì¹˜, ëŒì‚¬ì§„',
    category: 'milestone',
    priority: 'medium',
    notification_days: [30, 14, 7] // í•œ ë‹¬ ì „ë¶€í„°
  },
  {
    month: 12,
    title: 'MMR, ìˆ˜ë‘, ì¼ë³¸ë‡Œì—¼ ì ‘ì¢…',
    description: 'êµ­ê°€ì˜ˆë°©ì ‘ì¢…',
    category: 'health',
    priority: 'high',
    notification_days: [7, 3, 0]
  }
];
```

---

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

```sql
-- íƒ€ì„ë¼ì¸ í…Œì´ë¸”
CREATE TABLE timelines (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,

  -- íƒ€ì„ë¼ì¸ ì •ë³´
  title VARCHAR(200) NOT NULL,
  description TEXT,
  category VARCHAR(50) NOT NULL, -- 'health', 'insurance', 'work', 'preparation', etc.
  priority VARCHAR(20) NOT NULL, -- 'high', 'medium', 'low'

  -- ì¼ì •
  scheduled_date DATE NOT NULL,
  completed BOOLEAN DEFAULT false,
  completed_at TIMESTAMP WITH TIME ZONE,

  -- ì•Œë¦¼ ì„¤ì •
  notification_days INTEGER[] DEFAULT ARRAY[7, 3, 0], -- ì•Œë¦¼ ì „ì†¡ ì¼ìˆ˜ (7ì¼ ì „, 3ì¼ ì „, ë‹¹ì¼)
  notifications_sent INTEGER[] DEFAULT ARRAY[]::INTEGER[], -- ì´ë¯¸ ì „ì†¡ëœ ì•Œë¦¼ (ì¤‘ë³µ ë°©ì§€)

  -- ì—°ê²° ì •ë³´
  child_id UUID REFERENCES children(id) ON DELETE CASCADE, -- ìë…€ë³„ íƒ€ì„ë¼ì¸ (NULLì´ë©´ ì„ì‹ ë¶€)

  -- ë©”íƒ€ë°ì´í„°
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_timelines_user_id ON timelines(user_id);
CREATE INDEX idx_timelines_scheduled_date ON timelines(scheduled_date);
CREATE INDEX idx_timelines_completed ON timelines(completed);
CREATE INDEX idx_timelines_child_id ON timelines(child_id);

-- RLS ì •ì±…
ALTER TABLE timelines ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own timelines"
  ON timelines FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can update own timelines"
  ON timelines FOR UPDATE
  USING (auth.uid() = user_id);
```

---

### API ì—”ë“œí¬ì¸íŠ¸

#### 1. íƒ€ì„ë¼ì¸ ìë™ ìƒì„±
```typescript
// POST /api/timelines/generate
// ì‚¬ìš©ì í”„ë¡œí•„ ê¸°ë°˜ íƒ€ì„ë¼ì¸ ìë™ ìƒì„± (ì˜¨ë³´ë”© ì‹œ í˜¸ì¶œ)
Response: {
  count: number; // ìƒì„±ëœ íƒ€ì„ë¼ì¸ ê°œìˆ˜
}

// êµ¬í˜„ ë¡œì§
export async function POST(request: Request) {
  const user = await getUser();

  // 1. í”„ë¡œí•„ ì¡°íšŒ
  const profile = await supabase
    .from('profiles')
    .select('*')
    .eq('user_id', user.id)
    .single();

  const timelines = [];

  // 2. ì„ì‹ ë¶€ì¸ ê²½ìš°
  if (profile.is_pregnant && profile.due_date) {
    const currentWeek = profile.pregnancy_week;

    // í˜„ì¬ ì£¼ì°¨ ì´í›„ì˜ íƒ€ì„ë¼ì¸ ìƒì„±
    pregnancyTimeline
      .filter(t => t.week >= currentWeek)
      .forEach(template => {
        const scheduledDate = calculateWeekDate(profile.due_date, template.week);
        timelines.push({
          user_id: user.id,
          title: template.title,
          description: template.description,
          category: template.category,
          priority: template.priority,
          scheduled_date: scheduledDate,
          notification_days: template.notification_days
        });
      });
  }

  // 3. ìë…€ê°€ ìˆëŠ” ê²½ìš°
  const { data: children } = await supabase
    .from('children')
    .select('*')
    .eq('user_id', user.id);

  children.forEach(child => {
    const currentMonth = child.age_months;

    babyTimeline
      .filter(t => t.month >= currentMonth)
      .forEach(template => {
        const scheduledDate = calculateMonthDate(child.birth_date, template.month);
        timelines.push({
          user_id: user.id,
          child_id: child.id,
          title: template.title,
          description: template.description,
          category: template.category,
          priority: template.priority,
          scheduled_date: scheduledDate,
          notification_days: template.notification_days
        });
      });
  });

  // 4. DB ì €ì¥
  await supabase.from('timelines').insert(timelines);

  return { count: timelines.length };
}
```

---

#### 2. íƒ€ì„ë¼ì¸ ì¡°íšŒ
```typescript
// GET /api/timelines
// ì‚¬ìš©ì íƒ€ì„ë¼ì¸ ì¡°íšŒ (í™ˆ í™”ë©´)
Response: {
  this_week: Array<Timeline>; // ì´ë²ˆ ì£¼ í•  ì¼
  next_week: Array<Timeline>; // ë‹¤ìŒ ì£¼ í•  ì¼
  upcoming: Array<Timeline>; // í–¥í›„ ì¼ì •
}
```

---

#### 3. ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ ì²˜ë¦¬
```typescript
// PATCH /api/timelines/:id
// ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ/ë¯¸ì™„ë£Œ í† ê¸€
Request: {
  completed: boolean;
}
```

---

### í‘¸ì‹œ ì•Œë¦¼ êµ¬í˜„

#### Supabase Edge Function (ë§¤ì¼ ì‹¤í–‰)
```typescript
// supabase/functions/send-notifications/index.ts
// Cron Jobìœ¼ë¡œ ë§¤ì¼ ì‹¤í–‰ (ì˜ˆ: ë§¤ì¼ ì˜¤ì „ 9ì‹œ)

export async function handler() {
  const today = new Date();

  // 1. ì˜¤ëŠ˜ ì•Œë¦¼ì„ ë³´ë‚´ì•¼ í•  íƒ€ì„ë¼ì¸ ì¡°íšŒ
  const { data: timelines } = await supabase
    .from('timelines')
    .select('*, users!inner(*)')
    .eq('completed', false)
    .is('child_id', null) // ì„ì‹ ë¶€ íƒ€ì„ë¼ì¸ë§Œ (ê°„ì†Œí™”)
    .returns<Timeline[]>();

  timelines.forEach(async timeline => {
    const daysUntil = differenceInDays(timeline.scheduled_date, today);

    // 2. ì•Œë¦¼ ì „ì†¡ ëŒ€ìƒì¸ì§€ í™•ì¸
    if (
      timeline.notification_days.includes(daysUntil) &&
      !timeline.notifications_sent.includes(daysUntil)
    ) {
      // 3. í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡ (OneSignal ë˜ëŠ” Firebase Cloud Messaging)
      await sendPushNotification(timeline.user.device_token, {
        title: getNotificationTitle(daysUntil),
        body: timeline.title,
        data: { timeline_id: timeline.id }
      });

      // 4. ì•Œë¦¼ ì „ì†¡ ê¸°ë¡ ì—…ë°ì´íŠ¸
      await supabase
        .from('timelines')
        .update({
          notifications_sent: [...timeline.notifications_sent, daysUntil]
        })
        .eq('id', timeline.id);
    }
  });
}
```

---

## ğŸ¨ UI/UX ìš”êµ¬ì‚¬í•­

### í™ˆ í™”ë©´ íƒ€ì„ë¼ì¸ ì„¹ì…˜
- **ë ˆì´ì•„ì›ƒ**:
  - "ì´ë²ˆ ì£¼ í•  ì¼" (ì¹´ë“œ ë¦¬ìŠ¤íŠ¸)
  - "ë‹¤ìŒ ì£¼ í•  ì¼" (ì¹´ë“œ ë¦¬ìŠ¤íŠ¸)
  - "í–¥í›„ ì¼ì •" (íƒ€ì„ë¼ì¸ ë·°)
- **ì¹´ë“œ ë””ìì¸**:
  - ì²´í¬ë°•ìŠ¤ + ì œëª© + ì¼ì • ë‚ ì§œ
  - ì¹´í…Œê³ ë¦¬ ì•„ì´ì½˜ (ê±´ê°•, ë³´í—˜, ì§ì¥ ë“±)
  - ìš°ì„ ìˆœìœ„ ìƒ‰ìƒ (ë†’ìŒ: ë¹¨ê°•, ì¤‘ê°„: ì£¼í™©, ë‚®ìŒ: íšŒìƒ‰)
- **ì™„ë£Œ ì²˜ë¦¬**: ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ì™„ë£Œ/ë¯¸ì™„ë£Œ í† ê¸€, ì• ë‹ˆë©”ì´ì…˜

### íƒ€ì„ë¼ì¸ ìƒì„¸ í˜ì´ì§€
- **ì •ë³´**: ì œëª©, ì„¤ëª…, ì¼ì • ë‚ ì§œ, ì¹´í…Œê³ ë¦¬, ìš°ì„ ìˆœìœ„
- **ì•¡ì…˜**: ì™„ë£Œ ì²˜ë¦¬, ì¼ì • ìˆ˜ì •, AI ì±—ë´‡ ì—°ê²° (ê´€ë ¨ ì§ˆë¬¸)

---

## ğŸ“Š ì„±ê³µ ì§€í‘œ

### í•µì‹¬ KPI
- **íƒ€ì„ë¼ì¸ ì²´í¬ ì™„ë£Œìœ¨**: 70% ì´ìƒ (ìƒì„±ëœ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì¤‘ ì™„ë£Œ ë¹„ìœ¨)
- **í‘¸ì‹œ ì•Œë¦¼ ë„ë‹¬ë¥ **: 90% ì´ìƒ
- **í‘¸ì‹œ ì•Œë¦¼ í´ë¦­ë¥ **: 30% ì´ìƒ

### ì¸¡ì • ë°©ë²•
- Supabase Analytics ë˜ëŠ” Google Analytics ì´ë²¤íŠ¸ íŠ¸ë˜í‚¹
- í‘¸ì‹œ ì•Œë¦¼ ì„œë¹„ìŠ¤ ëŒ€ì‹œë³´ë“œ (OneSignal, FCM)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ] íƒ€ì„ë¼ì¸ ìƒì„± ë¡œì§ (ì„ì‹  ì£¼ì°¨ë³„, ìœ¡ì•„ ê°œì›”ë³„)
- [ ] ì¼ì • ë‚ ì§œ ê³„ì‚° ë¡œì§
- [ ] ì•Œë¦¼ ì „ì†¡ ëŒ€ìƒ í•„í„°ë§ ë¡œì§

### í†µí•© í…ŒìŠ¤íŠ¸
- [ ] íƒ€ì„ë¼ì¸ ìë™ ìƒì„± API
- [ ] íƒ€ì„ë¼ì¸ ì¡°íšŒ API
- [ ] ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ ì²˜ë¦¬ API

### E2E í…ŒìŠ¤íŠ¸ (Playwright)
- [ ] ì˜¨ë³´ë”© ì™„ë£Œ í›„ íƒ€ì„ë¼ì¸ ìë™ ìƒì„±
- [ ] í™ˆ í™”ë©´ì—ì„œ íƒ€ì„ë¼ì¸ í™•ì¸
- [ ] ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ ì²˜ë¦¬ í”Œë¡œìš°

---

## ğŸš€ êµ¬í˜„ ê³„íš

### Sprint 5 (2ì£¼)

#### Week 1: íƒ€ì„ë¼ì¸ ìƒì„± ë° ì¡°íšŒ
- **Day 1**: DB ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜
- **Day 2-3**: íƒ€ì„ë¼ì¸ ìë™ ìƒì„± ë¡œì§ êµ¬í˜„ (í…œí”Œë¦¿ ê¸°ë°˜)
- **Day 4**: í™ˆ í™”ë©´ íƒ€ì„ë¼ì¸ UI êµ¬í˜„
- **Day 5**: íƒ€ì„ë¼ì¸ ì¡°íšŒ API ë° ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ ì²˜ë¦¬

#### Week 2: í‘¸ì‹œ ì•Œë¦¼
- **Day 1-2**: í‘¸ì‹œ ì•Œë¦¼ ì„œë¹„ìŠ¤ ì—°ë™ (OneSignal ë˜ëŠ” FCM)
- **Day 3**: Supabase Edge Function êµ¬í˜„ (Cron Job)
- **Day 4**: ì•Œë¦¼ ì„¤ì • UI (ON/OFF, ì‹œê°„ëŒ€)
- **Day 5**: í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì •

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê°œë°œ ì™„ë£Œ ì¡°ê±´
- [ ] DB ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
- [ ] íƒ€ì„ë¼ì¸ ìë™ ìƒì„± êµ¬í˜„ (ì„ì‹ ë¶€, ì‹ ìƒì•„)
- [ ] í™ˆ í™”ë©´ íƒ€ì„ë¼ì¸ UI êµ¬í˜„
- [ ] ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ ì²˜ë¦¬ ê¸°ëŠ¥
- [ ] í‘¸ì‹œ ì•Œë¦¼ ì—°ë™ (OneSignal ë˜ëŠ” FCM)
- [ ] Supabase Edge Function (Cron Job) êµ¬í˜„

### í’ˆì§ˆ ê²€ì¦ ì¡°ê±´
- [ ] íƒ€ì„ë¼ì¸ ìë™ ìƒì„± ì •í™•ë„ 100%
- [ ] í‘¸ì‹œ ì•Œë¦¼ ë„ë‹¬ë¥  >90%
- [ ] íƒ€ì„ë¼ì¸ ì²´í¬ ì™„ë£Œìœ¨ >70% (ë‚´ë¶€ í…ŒìŠ¤íŠ¸)

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Supabase Edge Functions](https://supabase.com/docs/guides/functions)
- [OneSignal (í‘¸ì‹œ ì•Œë¦¼)](https://documentation.onesignal.com/)
- [Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging)

---

**ì‘ì„±ì¼**: 2026-02-07
**ì‘ì„±ì**: BebeCare Team
